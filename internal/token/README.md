# internal/token

The main goal of this package is to hold any logic related to the aquisition/refreshing/invalidation generated by Edgio REST API client.

## `token.GetAccessToken(credentials common.Creds) (string, error)`

This func outsources the process of getting an auth token from Edgio's Auth service. It assumes Edgio's standard auth endpoint as a default URL, but that can be overwritten by your own, in the event of an enterprise/self-hosted app.

It will double check of the credentials are present, and return an error if they are not, and then perform the HTTP request needed to get an access token to be used on the other edgio endpoints.

```go
credentials = common.Creds{
  Key: "some-clinet-key",
  Secret: "some-clinet-secret",
  Scopes: "some-scopes",
  AuthURL: "optional-auth-url",
}

token.GetAccessToken(credentials) // returns the access token in plain text
```

### `token.GetAccessToken` Mandatory Params

- `credentials common.Creds`
  - `common.Creds.Key`: Edgio REST API Client Key. This is the API Client's identifier on Edgio. You can generate your api client accessing `https://edgio.app/<your-org-name>/clients`.
  - `common.Creds.Secret`: Edgio REST API Client Secret. This is the API Client' secret, unique for each API Client. You can generate your api client accessing `https://edgio.app/<your-org-name>/clients`.

### `token.GetAccessToken` Optional Params & Default Values

- `credentials common.Creds`
  - `common.Creds.Scopes`: Edgio REST API Client scopes requested by the client. Different APIs needs different scopes. Refer to the [REST API docs](https://docs.edg.io/rest_api) to figure which ones you need.
    - Default value: `app.cache+app.cache.purge+app.waf+app.waf:edit+app.waf:read+app.accounts+app.config` (all scopes).
  - `common.Creds.AuthURL`: Edgio REST API auth url. You will probably never need to change this, but we included the option just in case (e. g.: future enterprise self-hosted option).
    - Default value: `https://id.edgio.app/connect/token` (Edgio's default auth API url).

<p align="right"><em><a href="../../#token">back to the main README</a></em></p>
